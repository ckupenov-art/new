<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Toilet Paper Pack Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>Toilet Paper Pack Generator</h1>
  <p class="small">
    Configure your toilet paper rolls and pack layout, see a 3D preview, and export a PNG image.
    All dimensions are in <strong>millimetres (mm)</strong>.
  </p>

  <div class="card">
    <h2>Roll Dimensions</h2>
    <div class="grid">
      <div>
        <label for="rollDiameter">Roll diameter (mm)</label>
        <input id="rollDiameter" type="number" min="1" step="0.1" value="110" />
      </div>
      <div>
        <label for="coreDiameter">Core diameter (mm)</label>
        <input id="coreDiameter" type="number" min="1" step="0.1" value="40" />
        <div class="small">Must be smaller than the roll diameter.</div>
      </div>
      <div>
        <label for="rollHeight">Roll height (mm)</label>
        <input id="rollHeight" type="number" min="1" step="0.1" value="90" />
      </div>
    </div>
  </div>

  <div class="card">
    <h2>Pack Layout</h2>
    <div class="grid">
      <div>
        <label for="rows">Rows (X direction)</label>
        <input id="rows" type="number" min="1" step="1" value="3" />
      </div>
      <div>
        <label for="rollsPerRow">Rolls per row (Y direction)</label>
        <input id="rollsPerRow" type="number" min="1" step="1" value="4" />
      </div>
      <div>
        <label for="layers">Layers (Z direction)</label>
        <input id="layers" type="number" min="1" step="1" value="2" />
      </div>
    </div>
    <p class="note">
      We assume tight packing: rolls are touching each other with no gaps.
    </p>
    <button id="generateBtn">Generate / Update Pack</button>
  </div>

  <div class="card">
    <h2>Results</h2>
    <dl class="results">
      <dt>Total rolls per pack</dt>
      <dd id="totalRolls">–</dd>

      <dt>Pack outer dimensions (tight packing)</dt>
      <dd id="packDimensions">–</dd>

      <dt>Pack footprint (top view)</dt>
      <dd id="footprint">–</dd>
    </dl>
    <p class="note">
      Pack width = rows × roll diameter<br/>
      Pack depth = rolls per row × roll diameter<br/>
      Pack height = layers × roll height
    </p>
  </div>

  <div class="card">
    <h2>3D View &amp; Controls</h2>
    <div id="canvas-container"></div>

    <h3>Pack Rotation</h3>
    <div class="controls-grid">
      <div>
        <label for="packRotX">Rotate pack X (deg)</label>
        <input id="packRotX" type="range" min="-180" max="180" value="15" />
        <span id="packRotXVal" class="small">15°</span>
      </div>
      <div>
        <label for="packRotY">Rotate pack Y (deg)</label>
        <input id="packRotY" type="range" min="-180" max="180" value="35" />
        <span id="packRotYVal" class="small">35°</span>
      </div>
    </div>

    <h3>Camera Controls</h3>
    <div class="controls-grid">
      <div>
        <label for="camAngleX">Camera angle X (deg)</label>
        <input id="camAngleX" type="range" min="-180" max="180" value="45" />
        <span id="camAngleXVal" class="small">45°</span>
      </div>
      <div>
        <label for="camAngleY">Camera angle Y (deg)</label>
        <input id="camAngleY" type="range" min="-80" max="80" value="30" />
        <span id="camAngleYVal" class="small">30°</span>
      </div>
      <div>
        <label for="camDistance">Camera zoom (distance)</label>
        <input id="camDistance" type="range" min="150" max="1200" value="550" />
        <span id="camDistanceVal" class="small">550</span>
      </div>
      <div>
        <label for="camPanX">Camera pan X</label>
        <input id="camPanX" type="range" min="-400" max="400" value="0" />
        <span id="camPanXVal" class="small">0</span>
      </div>
      <div>
        <label for="camPanY">Camera pan Y</label>
        <input id="camPanY" type="range" min="-400" max="400" value="0" />
        <span id="camPanYVal" class="small">0</span>
      </div>
    </div>

    <button id="exportPngBtn">Export PNG</button>
    <p class="note">
      You can also rotate, zoom, and pan with your mouse (OrbitControls).
    </p>
  </div>

  <script src="https://unpkg.com/three@0.161.0/build/three.min.js"></script>
  <script src="https://unpkg.com/three@0.161.0/examples/js/controls/OrbitControls.js"></script>
  <script src="app.js"></script>
</body>
</html>
